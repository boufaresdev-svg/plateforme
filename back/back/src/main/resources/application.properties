# Production Environment Configuration

# Database Configuration - Production
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver
spring.datasource.url=jdbc:sqlserver://57.131.23.121:1433;databaseName=platform ;encrypt=false;trustServerCertificate=true
spring.datasource.username=sms2-platform
spring.datasource.password=AZERTY&&SMS2III
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect

# HikariCP Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=60000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.connection-test-query=SELECT 1

spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.show-sql=false

# Disable debug logging for production
logging.level.org.springframework.web=INFO
logging.level.com.example.BacK=DEBUG
logging.level.org.hibernate.SQL=OFF
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=OFF

# Server Configuration - Production
server.address=0.0.0.0
server.port=8080
app.base.url=https://api.platform.sms2i.com.tn

# File Upload Configuration - Production
app.upload.dir=/var/www/uploads
app.upload.base-url=${app.base.url}/api/stock/lots/uploads

# Contenu Detaille File Upload - Production
file.upload-dir=/var/www/uploads/contenus

# Multipart Configuration - Increased for large files
spring.servlet.multipart.max-file-size=2GB
spring.servlet.multipart.max-request-size=2GB
spring.servlet.multipart.file-size-threshold=10MB
spring.servlet.multipart.location=${java.io.tmpdir}

# Streaming upload endpoints - disable multipart for these paths
spring.servlet.multipart.enabled=true

# Tomcat Configuration for Large File Uploads
server.tomcat.connection-timeout=3600000
server.tomcat.max-swallow-size=-1
server.tomcat.max-http-form-post-size=-1

# Async request timeout (1 hour for large uploads)
spring.mvc.async.request-timeout=3600000

# JWT Configuration - Production (use environment variables in real production)
application.security.jwt.secret-key=${JWT_SECRET_KEY:404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970}
application.security.jwt.expiration=86400000
application.security.jwt.refresh-token.expiration=604800000

# Disable H2 Console in production
spring.h2.console.enabled=false

# SSL Configuration (if needed, uncomment and configure)
# server.ssl.enabled=true
# server.ssl.key-store=classpath:keystore.p12
# server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD}
# server.ssl.key-store-type=PKCS12
# server.ssl.key-alias=tomcat
